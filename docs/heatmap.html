<!doctype html>
<html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>差枚ヒートマップ</title>
<link rel="stylesheet" href="style.css"/>
</head><body>
<nav>
<a href="index.html">トップ</a> |
<a href="ranking.html">差枚ランキング</a> |
<a href="heatmap.html">差枚ヒートマップ</a>
</nav><hr/>
<h1>差枚ヒートマップ（台番号 × 日付）</h1><p class="note">赤=プラス / 青=マイナス（濃いほど絶対値が大きい）</p>
<div class="legend">
  <div class="small note">色の基準（最大濃さ）: ±1000枚</div>
  <div class="swatch" style="background:rgb(255,220,220)"></div><div class="small">プラス</div>
  <div class="swatch" style="background:rgb(220,220,255)"></div><div class="small">マイナス</div>
</div>

<div class="hm-wrap">
<table class="hm">
<thead><tr><th>台番号</th>
</tr></thead><tbody>
</tbody></table></div>

<script>
(function() {
  const cap = 1000.0;
  const cells = document.querySelectorAll('td[data-v]');
  cells.forEach(td => {
    const s = td.getAttribute('data-v');
    if (!s) return;
    const v = parseFloat(s);
    const a = Math.min(Math.abs(v) / cap, 1.0);

    let r=255, g=255, b=255;
    if (v > 0) {
      r = 255;
      g = Math.round(255 - 110*a);
      b = Math.round(255 - 110*a);
    } else if (v < 0) {
      r = Math.round(255 - 110*a);
      g = Math.round(255 - 110*a);
      b = 255;
    }

    td.style.backgroundColor = `rgb(${r},${g},${b})`;
    td.style.color = '#111';
  });
})();
</script>

</body></html>