<!doctype html>
<html lang="ja"><head>
<meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>差枚ランキング</title>
<link rel="stylesheet" href="style.css"/>
</head><body>
<nav>
<a href="index.html">トップ</a> |
<a href="ranking.html">差枚ランキング</a> |
<a href="heatmap.html">差枚ヒートマップ</a>
</nav><hr/>
<h1>差枚ランキング</h1>
<p class="note">
MAX/平均/合計は「プラス差枚のみ」で計算。勝率は「差枚レコードのうちプラスだった割合」（レコード基準）。
「台別（全台）」は期間内に出てきた全台を表示します。
「機種別」は機種名を選択すると、その機種の台別（全台）を表示します。
</p>

<div class="btns">
  <button class="btn active" data-target="sec1">最新日</button>
  <button class="btn" data-target="sec7">直近7日</button>
  <button class="btn" data-target="sec30">直近30日</button>
</div>

<div id="sec1" class="section active"><div id="p1_root"><h2>最新日（2026-02-11）</h2>
<div class="subtabs">
  <button class="pill active" data-group="unit">台別（全台）</button>
  <button class="pill" data-group="machine">機種別（機種名選択）</button>
</div>
<div class="subtabs">
  <button class="pill active" data-m="max">MAX</button>
  <button class="pill" data-m="avg">平均</button>
  <button class="pill" data-m="sum">合計</button>
  <button class="pill" data-m="win">勝率</button>
</div>
<div class="block active" data-group="unit" data-metric="max"><h3>最新日（2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="avg"><h3>最新日（2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="sum"><h3>最新日（2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="win"><h3>最新日（2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="machine" data-metric="__picker__"><h3>最新日（2026-02-11）（機種別）</h3><p>該当データなし</p></div>
<script>
(function() {
  const root = document.getElementById("p1_root");
  const groupBtns = root.querySelectorAll('.subtabs')[0].querySelectorAll('.pill');
  const metricBtns = root.querySelectorAll('.subtabs')[1].querySelectorAll('.pill');
  let curGroup = "unit";
  let curMetric = "max";

  function render() {
    groupBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-group') === curGroup));
    metricBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-m') === curMetric));

    // unit: 指標一致だけ表示
    root.querySelectorAll('.block[data-group="unit"]').forEach(function(el) {
      const m = el.getAttribute('data-metric');
      el.classList.toggle('active', curGroup === "unit" && m === curMetric);
    });

    // machine: pickerを表示し、内部の機種ブロックへ metric を渡す
    const picker = root.querySelector('.block[data-group="machine"][data-metric="__picker__"]');
    if (picker) {
      picker.classList.toggle('active', curGroup === "machine");
      const panel = picker.querySelector('[id$="_mpanel"]');
      if (panel && panel._setMetric) {
        panel._setMetric(curMetric);
      }
    }
  }

  groupBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curGroup = b.getAttribute('data-group');
      render();
    });
  });

  metricBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curMetric = b.getAttribute('data-m');
      render();
    });
  });

  render();
})();
</script></div></div>
<div id="sec7" class="section"><div id="p7_root"><h2>直近7日（2026-02-11〜2026-02-11）</h2>
<div class="subtabs">
  <button class="pill active" data-group="unit">台別（全台）</button>
  <button class="pill" data-group="machine">機種別（機種名選択）</button>
</div>
<div class="subtabs">
  <button class="pill active" data-m="max">MAX</button>
  <button class="pill" data-m="avg">平均</button>
  <button class="pill" data-m="sum">合計</button>
  <button class="pill" data-m="win">勝率</button>
</div>
<div class="block active" data-group="unit" data-metric="max"><h3>直近7日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="avg"><h3>直近7日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="sum"><h3>直近7日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="win"><h3>直近7日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="machine" data-metric="__picker__"><h3>直近7日（2026-02-11〜2026-02-11）（機種別）</h3><p>該当データなし</p></div>
<script>
(function() {
  const root = document.getElementById("p7_root");
  const groupBtns = root.querySelectorAll('.subtabs')[0].querySelectorAll('.pill');
  const metricBtns = root.querySelectorAll('.subtabs')[1].querySelectorAll('.pill');
  let curGroup = "unit";
  let curMetric = "max";

  function render() {
    groupBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-group') === curGroup));
    metricBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-m') === curMetric));

    // unit: 指標一致だけ表示
    root.querySelectorAll('.block[data-group="unit"]').forEach(function(el) {
      const m = el.getAttribute('data-metric');
      el.classList.toggle('active', curGroup === "unit" && m === curMetric);
    });

    // machine: pickerを表示し、内部の機種ブロックへ metric を渡す
    const picker = root.querySelector('.block[data-group="machine"][data-metric="__picker__"]');
    if (picker) {
      picker.classList.toggle('active', curGroup === "machine");
      const panel = picker.querySelector('[id$="_mpanel"]');
      if (panel && panel._setMetric) {
        panel._setMetric(curMetric);
      }
    }
  }

  groupBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curGroup = b.getAttribute('data-group');
      render();
    });
  });

  metricBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curMetric = b.getAttribute('data-m');
      render();
    });
  });

  render();
})();
</script></div></div>
<div id="sec30" class="section"><div id="p30_root"><h2>直近30日（2026-02-11〜2026-02-11）</h2>
<div class="subtabs">
  <button class="pill active" data-group="unit">台別（全台）</button>
  <button class="pill" data-group="machine">機種別（機種名選択）</button>
</div>
<div class="subtabs">
  <button class="pill active" data-m="max">MAX</button>
  <button class="pill" data-m="avg">平均</button>
  <button class="pill" data-m="sum">合計</button>
  <button class="pill" data-m="win">勝率</button>
</div>
<div class="block active" data-group="unit" data-metric="max"><h3>直近30日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="avg"><h3>直近30日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="sum"><h3>直近30日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="unit" data-metric="win"><h3>直近30日（2026-02-11〜2026-02-11）（台別）</h3><p>該当データなし</p></div>
<div class="block" data-group="machine" data-metric="__picker__"><h3>直近30日（2026-02-11〜2026-02-11）（機種別）</h3><p>該当データなし</p></div>
<script>
(function() {
  const root = document.getElementById("p30_root");
  const groupBtns = root.querySelectorAll('.subtabs')[0].querySelectorAll('.pill');
  const metricBtns = root.querySelectorAll('.subtabs')[1].querySelectorAll('.pill');
  let curGroup = "unit";
  let curMetric = "max";

  function render() {
    groupBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-group') === curGroup));
    metricBtns.forEach(b => b.classList.toggle('active', b.getAttribute('data-m') === curMetric));

    // unit: 指標一致だけ表示
    root.querySelectorAll('.block[data-group="unit"]').forEach(function(el) {
      const m = el.getAttribute('data-metric');
      el.classList.toggle('active', curGroup === "unit" && m === curMetric);
    });

    // machine: pickerを表示し、内部の機種ブロックへ metric を渡す
    const picker = root.querySelector('.block[data-group="machine"][data-metric="__picker__"]');
    if (picker) {
      picker.classList.toggle('active', curGroup === "machine");
      const panel = picker.querySelector('[id$="_mpanel"]');
      if (panel && panel._setMetric) {
        panel._setMetric(curMetric);
      }
    }
  }

  groupBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curGroup = b.getAttribute('data-group');
      render();
    });
  });

  metricBtns.forEach(function(b) {
    b.addEventListener('click', function() {
      curMetric = b.getAttribute('data-m');
      render();
    });
  });

  render();
})();
</script></div></div>

<script>
(function() {
  const btns = document.querySelectorAll('.btn');
  const secs = document.querySelectorAll('.section');
  btns.forEach(function(b) {
    b.addEventListener('click', function() {
      btns.forEach(x => x.classList.remove('active'));
      b.classList.add('active');
      const t = b.getAttribute('data-target');
      secs.forEach(function(s) {
        if (s.id === t) s.classList.add('active');
        else s.classList.remove('active');
      });
    });
  });
})();
</script>
</body></html>